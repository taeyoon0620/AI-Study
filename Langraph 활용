LangGraphë¥¼ í™œìš©í•˜ì—¬ ë²ˆì—­ í’ˆì§ˆì„ ë¹„êµí•˜ê³ , ë” ë‚˜ì€ ë²ˆì—­ì„ ì„ íƒí•˜ëŠ” ì‹œìŠ¤í…œì„ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì•„ë˜ ì½”ë“œëŠ” ë‘ ê°€ì§€ ë²ˆì—­ ë°©ë²•(ì˜ˆ: OpenAI GPT-4o-miniì™€ ë‹¤ë¥¸ ë²ˆì—­ API)ì„ ë¹„êµí•˜ì—¬ ë” ë‚˜ì€ ë²ˆì—­ì„ ì„ íƒí•˜ëŠ” LangGraph ê¸°ë°˜ì˜ íŒŒì´í”„ë¼ì¸ì„ êµ¬í˜„í•œ ê²ƒì…ë‹ˆë‹¤.


ğŸ“Œ ì£¼ìš” ê¸°ëŠ¥
ë‘ ê°œì˜ ë²ˆì—­ ëª¨ë¸ì„ ì‚¬ìš© (OpenAI API ë° Hugging Face ë²ˆì—­ ëª¨ë¸ ì˜ˆì œ)
LangGraphë¡œ ì›Œí¬í”Œë¡œìš° êµ¬ì„±
ê°„ë‹¨í•œ í‰ê°€ í•¨ìˆ˜ë¡œ ë²ˆì—­ í’ˆì§ˆ ë¹„êµ í›„ ì„ íƒ

from typing import Dict, Any
from langchain.chat_models import ChatOpenAI
from langchain.schema import HumanMessage
from langgraph.graph import StateGraph, END

# OpenAI API ì„¤ì •
os.environ["OPENAI_API_KEY"] = "your-api-key"

# ìƒíƒœ ê´€ë¦¬ (ë²ˆì—­ ê²°ê³¼ ì €ì¥)
class TranslateState(Dict[str, Any]):
    input_text: str
    gpt_translation: str
    other_translation: str
    best_translation: str

# OpenAI ë²ˆì—­ ëª¨ë¸ (GPT-4o-mini ì‚¬ìš©)
def translate_with_gpt(state: TranslateState):
    llm = ChatOpenAI(model_name="gpt-4o-mini")
    response = llm([HumanMessage(content=f"Translate this into Japanese: {state['input_text']}")])
    state["gpt_translation"] = response.content
    return state

# ë‹¤ë¥¸ ë²ˆì—­ API ì‚¬ìš© (ì˜ˆ: Hugging Face ë²ˆì—­ ëª¨ë¸)
def translate_with_other(state: TranslateState):
    # ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” Hugging Face Transformers, DeepL API ë“±ì„ í™œìš© ê°€ëŠ¥
    state["other_translation"] = f"[HF Model] {state['input_text']} (Translated)"  # ì„ì‹œ ì¶œë ¥
    return state

# ë²ˆì—­ ë¹„êµ í•¨ìˆ˜ (ê°„ë‹¨í•œ ì˜ˆì œ)
def evaluate_translation(state: TranslateState):
    """ ë‘ ë²ˆì—­ ê²°ê³¼ ì¤‘ í’ˆì§ˆì´ ë” ë‚˜ì€ ê²ƒì„ ì„ íƒ """
    gpt_len = len(state["gpt_translation"])
    other_len = len(state["other_translation"])

    # ì˜ˆì œ: ë” ê¸´ ë²ˆì—­ì´ ë” ë‚˜ì€ ê²ƒìœ¼ë¡œ ê°„ì£¼ (ì‹¤ì œ í‰ê°€ ë©”íŠ¸ë¦­ ì ìš© ê°€ëŠ¥)
    if gpt_len > other_len:
        state["best_translation"] = state["gpt_translation"]
    else:
        state["best_translation"] = state["other_translation"]

    return state

# LangGraph ì›Œí¬í”Œë¡œìš° êµ¬ì¶•
workflow = StateGraph(TranslateState)

# ë…¸ë“œ ì¶”ê°€ (ë²ˆì—­ ë‹¨ê³„)
workflow.add_node("GPT_Translation", translate_with_gpt)
workflow.add_node("Other_Translation", translate_with_other)
workflow.add_node("Evaluate", evaluate_translation)

# ë…¸ë“œ ì—°ê²° (ë™ì‹œì— ë²ˆì—­ ì‹¤í–‰ â†’ í‰ê°€ í›„ ì¢…ë£Œ)
workflow.add_edge("GPT_Translation", "Evaluate")
workflow.add_edge("Other_Translation", "Evaluate")
workflow.add_edge("Evaluate", END)

# ì‹œì‘ ì§€ì  ì„¤ì •
workflow.set_entry_point(["GPT_Translation", "Other_Translation"])

# LangGraph ì‹¤í–‰ ì—”ì§„ ìƒì„±
graph = workflow.compile()

# í…ŒìŠ¤íŠ¸ ì‹¤í–‰
input_text = "Hello, how are you?"
state = {"input_text": input_text}

result = graph.invoke(state)
print(f"âœ… Best Translation: {result['best_translation']}")


ğŸ“ ì½”ë“œ ì„¤ëª…
TranslateState: ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” í´ë˜ìŠ¤
translate_with_gpt(): OpenAI GPT-4o-minië¥¼ ì‚¬ìš©í•˜ì—¬ ë²ˆì—­
translate_with_other(): ë‹¤ë¥¸ ë²ˆì—­ API (ì˜ˆì œëŠ” ë‹¨ìˆœ í…ìŠ¤íŠ¸ ë³€í™˜)
evaluate_translation(): ë²ˆì—­ ê²°ê³¼ ë¹„êµ í›„ ìµœì ì˜ ë²ˆì—­ ì„ íƒ
LangGraphë¡œ ì›Œí¬í”Œë¡œìš°ë¥¼ êµ¬ì¶•í•˜ì—¬ ë²ˆì—­ ë¹„êµ ìë™í™”

ğŸ”¹ ì¶”ê°€ ê°œì„  ê°€ëŠ¥ ì‚¬í•­
í‰ê°€ ë¡œì§ ê³ ë„í™”: BLEU, ROUGE, METEOR ê°™ì€ ë²ˆì—­ í’ˆì§ˆ í‰ê°€ ì§€í‘œ ì ìš©
LangChain Memory ì‚¬ìš©: ì´ì „ ë²ˆì—­ ë°ì´í„° í™œìš©
Multi-agent ê¸°ë°˜ í™•ì¥: ë” ë‹¤ì–‘í•œ ë²ˆì—­ ëª¨ë¸ ì¶”ê°€
ì´ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ë©´ ë‘ ê°€ì§€ ë²ˆì—­ ê²°ê³¼ ì¤‘ ë” ë‚˜ì€ ê²°ê³¼ë¥¼ ìë™ìœ¼ë¡œ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
í•„ìš”í•œ ë¶€ë¶„ì„ ì›í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ìˆ˜ì •í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤! ğŸš€







